<!DOCTYPE html><html lang="zh-TW" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>重新認識 Vue3 - 基礎 | NekoChan</title><meta name="keywords" content="Vue3"><meta name="author" content="NekoChan"><meta name="copyright" content="NekoChan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="應用 &amp; 組件實例 應用實例 每個 Vue 應用都是透過 createApp 函式創建一個新的 應用實例 開始的： 123const app &#x3D; vue.createApp(&amp;#123;  &#x2F;* 選項 *&#x2F;&amp;#125;) 該應用實例用於在應用中 註冊全局組件 的。 應用實例暴露的大部分方法都會返回同一實例，代表允許鏈式： 1234Vue.createApp(&amp;#123;&amp;#125;)  ."><meta property="og:type" content="article"><meta property="og:title" content="重新認識 Vue3 - 基礎"><meta property="og:url" content="https://nekochan.vercel.app/posts/677b/index.html"><meta property="og:site_name" content="NekoChan"><meta property="og:description" content="應用 &amp; 組件實例 應用實例 每個 Vue 應用都是透過 createApp 函式創建一個新的 應用實例 開始的： 123const app &#x3D; vue.createApp(&amp;#123;  &#x2F;* 選項 *&#x2F;&amp;#125;) 該應用實例用於在應用中 註冊全局組件 的。 應用實例暴露的大部分方法都會返回同一實例，代表允許鏈式： 1234Vue.createApp(&amp;#123;&amp;#125;)  ."><meta property="og:locale" content="zh_TW"><meta property="og:image" content="https://nekochan.vercel.app/posts/677b/cover.webp"><meta property="article:published_time" content="2021-06-02T00:00:00.000Z"><meta property="article:modified_time" content="2021-06-08T06:04:34.182Z"><meta property="article:author" content="NekoChan"><meta property="article:tag" content="Vue3"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://nekochan.vercel.app/posts/677b/cover.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/images/logo.webp"><link rel="canonical" href="https://nekochan.vercel.app/posts/677b/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查詢的內容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"複製成功",error:"複製錯誤",noSupport:"瀏覽器不支援"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"剛剛",min:"分鐘前",hour:"小時前",day:"天前",month:"個月前"},copyright:{limitCount:50,languages:{author:"作者: NekoChan",link:"連結: ",source:"來源: NekoChan",info:"著作權歸作者所有。商業轉載請聯絡作者獲得授權，非商業轉載請註明出處。"}},lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"重新認識 Vue3 - 基礎",isPost:!0,isHome:!1,isHighlightShrink:void 0,isToc:!0,postUpdate:"2021-06-08 06:04:34"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const n=saveToLocal.get("global-font-size");void 0!==n&&document.documentElement.style.setProperty("--global-font-size",n+"px")})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/css/nekochan.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="preconnect" href="https://fonts.gstatic.com"><link rel="preload" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&display=swap" as="style" onload='this.rel="stylesheet"'><link rel="stylesheet" href="/css/highlight/styles/atom-one-dark-reasonable.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">載入中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/images/avater.webp" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">標籤</div><div class="length-num">7</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分類</div><div class="length-num">5</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>歸檔</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分類</span></a></div><div class="menus_item"><a class="site-page" href="/note/"><i class="fa-fw fas fa-book-open"></i> <span>筆記</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>關於</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/posts/677b/cover.webp)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">NekoChan</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜尋</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>歸檔</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分類</span></a></div><div class="menus_item"><a class="site-page" href="/note/"><i class="fa-fw fas fa-book-open"></i> <span>筆記</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>關於</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">重新認識 Vue3 - 基礎</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2021-06-02T00:00:00.000Z" title="發表於 2021-06-02 00:00:00">2021-06-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2021-06-08T06:04:34.182Z" title="更新於 2021-06-08 06:04:34">2021-06-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%B6%B2%E9%A0%81%E5%89%8D%E7%AB%AF/">網頁前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%B6%B2%E9%A0%81%E5%89%8D%E7%AB%AF/%E9%87%8D%E6%96%B0%E8%AA%8D%E8%AD%98/">重新認識</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="應用-組件實例">應用 &amp; 組件實例</h2><h3 id="應用實例">應用實例</h3><p>每個 Vue 應用都是透過 <code>createApp</code> 函式創建一個新的 <em>應用實例</em> 開始的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = vue.createApp(&#123;<br>  <span class="hljs-comment">/* 選項 */</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>該應用實例用於在應用中 <em>註冊全局組件</em> 的。</p><p>應用實例暴露的大部分方法都會返回同一實例，代表允許鏈式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;&#125;)<br>  .component(<span class="hljs-string">&#x27;SearchInput&#x27;</span>, SearchInputComponent)<br>  .directive(<span class="hljs-string">&#x27;focus&#x27;</span>, FocusDirective)<br>  .use(LocalePlugin)<br></code></pre></td></tr></table></figure><h3 id="根組件">根組件</h3><p>傳遞給 <code>createApp</code> 的選項用於設定根組件。當掛載應用時，該組件被用作渲染的起點。</p><p>一個應用需要被掛載到 DOM 元素中。例如把一個 Vue 應用掛載到 <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> RootComponent = &#123;<br>  <span class="hljs-comment">// 根組件選項</span><br>&#125;<br><br><span class="hljs-comment">// 創建應用實例</span><br><span class="hljs-keyword">const</span> app = Vue.createApp(RootComponent)<br><br><span class="hljs-comment">// 掛載應用至 DOM</span><br><span class="hljs-keyword">const</span> vm = app.mount(<span class="hljs-string">&#x27;#app&#x27;</span>) <span class="hljs-comment">// 返回組件實例</span><br></code></pre></td></tr></table></figure><p>與大多數應用實例方法不同的是，<code>mount</code> 不返回應用本身。但是，它會返回組件實例。</p><blockquote><p>Vue 雖然沒有完全遵循 MVVM 模型，但是 Vue 的設計受到了它的啟發。<br>因此經常使用 <code>vm</code>（ViewModel）變量名 表示組件實例。</p></blockquote><h3 id="組件實例-property">組件實例 property</h3><p>在組件選項中定義的 <code>data</code> property 是透過組件實例暴露的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-comment">// property</span><br>      count: <span class="hljs-number">4</span><br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">const</span> vm = app.mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br><span class="hljs-built_in">console</span>.log(vm.$data.count) <span class="hljs-comment">// 4</span><br><span class="hljs-built_in">console</span>.log(vm.count) <span class="hljs-comment">// 4</span><br></code></pre></td></tr></table></figure><p>還有更多 組件選項 可以將自定義的 property 添加到組件實例中，例如 <code>methods</code>, <code>props</code>, <code>computed</code>, <code>inject</code> 和 <code>setup</code> 。</p><p>Vue 還通過組件實例暴露了一些內置 property，如 <code>$attrs</code> 和 <code>$emit</code>。這些 property 都有一個 <code>$</code> 前餟，以避免和自定義的 property 名稱衝突。</p><h3 id="生命週期鉤子">生命週期鉤子</h3><p>每個組件在被創建時都會經過一系列初始化過程。例如，設定數據監聽、編譯模板、掛載實例到 DOM 並在數據變化時更新 DOM 等。同時在這過程中也會調用一些叫做 <em>生命週期鉤子</em> 的函式，這允許開發者在不同階段添加自己程式碼的機會。</p><p>比如 created 鉤子可以用來在一個實例被創建之後調用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      count: <span class="hljs-number">1</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// created : 當該實例被 Vue 創建時調用</span><br>  created() &#123;<br>    <span class="hljs-comment">// this 指向 vm 實例，vm 實例暴露了 data property</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`count is <span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.count&#125;</span>`</span>) <span class="hljs-comment">// &#x27;count is 1&#x27;</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>還有更多鉤子，它們在生命週期不同階段時被調用，例如 <code>mounted</code>, <code>updated</code> 和 <code>unmounted</code>，生命週期鉤子的 <code>this</code> 指向調用該鉤子的當前實例。</p><div class="note info flat"><p>不要在選項 property 或 回調函式 上使用箭頭函式，因為 箭頭函式 沒有 this。</p></div><h3 id="生命週期圖">生命週期圖</h3><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/posts/677b/lifecycle_zh-TW.svg" alt="Vue3生命週期圖"></p><h2 id="模板語法">模板語法</h2><p>Vue 使用了基於 HTML 的模板語法，允許開發者聲明式地將 DOM 綁定至底層組件實例的數據。所有 Vue 的模板都是合法的 HTML，所以能被遵循規範的瀏覽器和 HTML 解析器解析。</p><p>在底層的實現上，Vue 將模板編譯成虛擬 DOM 渲染函式。結合響應性系統，Vue 能夠智能地計算出最少需要重新渲染多少組件，並把 DOM 操作次數減到最少。</p><h3 id="插值">插值</h3><h4 id="文本">文本</h4><p>數據綁定最常見的形式就是使用 “Mustache” 語法（雙大括號）的文本插值：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Message: &#123;&#123; msg &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Mustache 標籤將會被替代為對應組件實例中 msg property 的值。無論何時，綁定的組件實例上msg property 發生了改變，插值處的內容都會更新。</p><p>透過 <code>v-once</code> 指令，也能改為一次性插值，當數據改變時，插值處的內容不會更新。但這會影響到該結點上的其他數據綁定：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-once</span>&gt;</span>這個 msg 將不會更新 : &#123;&#123; msg &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="原始-HTML">原始 HTML</h4><p>雙大括號會將數據解釋為普通文本，而非 HTML 元素。為了輸出 HTML 元素，需要使用 <code>v-html</code>　指令：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>這將輸出 普通文本 : &#123;&#123; rawHtml &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>這將輸出 HTML 元素 : <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;rawHtml&quot;</span>&gt;</span>這些內容會被替換為 rawHtml 的值<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這個 span 的內容將會被替換成為 property rawHtml 的值，需要注意的是，property 值中的數據綁定會被忽略。</p><blockquote><p>在網頁上動態任意渲染 HTML 是非常危險的，<br>因為它很容易被 XSS (Cross-site scripting) 攻擊。<br>請只對可信內容使用 HTML 插值，絕對不要將用戶提供的內容做為插值。</p></blockquote><h4 id="Attribute">Attribute</h4><p>Mustache（雙大括號）語法不能在 HTML attribute 中使用，但可以使用 <code>v-bind</code> 指令代替：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 這個 id 將會是動態的 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-bind:id</span>=<span class="hljs-string">&quot;dynamicId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果綁定的值是 <code>null</code> 或 <code>undefined</code>，那麼該 attribute 就不會被包含在渲染的元素上（被省略）。</p><p>對於布林值類型的 attribute，<code>v-bind</code> 的處理方式稍有不同：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind:disabled</span>=<span class="hljs-string">&quot;isButtonDisabled&quot;</span>&gt;</span>按紐<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>當 <code>isButtonDisabled</code> 為 <em>truthy</em> 時：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>&gt;</span>按紐<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>當 <code>isButtonDisabled</code> 為 <em>falsy</em> 時：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- disabled attribute 直接被省略 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>按紐<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="JavaScript-表達式">JavaScript 表達式</h4><p>Mustache（雙大括號）語法 和 指令 支援 <em>JavaScript 表達式</em>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>The count is : &#123;&#123; count + 1 &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ok ? &#x27;Yes&#x27; : &#x27;No&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>翻轉字串 : &#123;&#123; msg.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-bind:id</span>=<span class="hljs-string">&quot;&#x27;list&#x27; + id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="指令">指令</h3><p>指令（Directives）是帶有 <code>v-</code> 前餟的特殊 attribute。</p><p>指令 attribute 的值預期是 <em>單個 JavaScript 表達式</em>（ <code>v-for</code> 和 <code>v-on</code> 是例外）。</p><p>指令的職責是，當表達式的值改變時，將其產生的連帶影響，響應式地作用於 DOM。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;seen&quot;</span>&gt;</span>你能看到我嗎？<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這裡的 <code>v-if</code> 指令將根據表達式 <code>seen</code> 的值 的 <code>truthy / falsy</code> 對應 <code>插入 / 移除</code> <code>&lt;p&gt;</code> 元素。</p><h4 id="參數">參數</h4><p>有一些指令能夠接收 <em>一個參數</em>，在指令後方以冒號表示。</p><p>例如 <code>v-bind</code> 指令可用於響應式地更新 HTML attribute：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 傳入 href attribute 給 v-bind 指令 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>猜猜這個連結會去哪？<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這裡的 <code>href</code> 是參數，告知 <code>v-bind</code> 指令將該元素的 <code>href</code> attribute 語表達式的 <code>url</code> 的值綁定。</p><p><code>v-on</code> 指令，它用於監聽 DOM 事件：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;doSomething&quot;</span>&gt;</span>猜猜點擊會發生什麼事？<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這裡的參數是 事件名稱。</p><h4 id="動態參數">動態參數</h4><p>傳入指令參數也可以使用 <em>JavaScript 表達式</em>，作法是用方括號括起來：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[<span class="hljs-attr">attributeName</span>]=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>猜猜這個連結會去哪？<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這裡的 <code>attributeName</code> 會被做為 <em>JavaScript 表達式</em> 進行動態求值。<br>例如，如果組件實例有一個 data property <code>attributeName</code>，其值為 <code>'href'</code>，<br>那這個綁定同等於 <code>v-bind:href</code>。</p><h4 id="修飾符">修飾符</h4><p>修飾符（modifier）是以半角句號 <code>.</code> 的特殊後餟，用於指定一個指令應改以特殊的方式綁定。<br>例如，<code>.prevent</code> 修飾符告訴 <code>v-on</code> 指令對於處發事件的調用 <code>event.preventDefault()</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 取消 form 在觸發 sumbit 的默認行為 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">v-on:submit.prevent</span>=<span class="hljs-string">&quot;onSubmit&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="縮寫">縮寫</h3><p><code>v-</code> 開頭具有視覺提示，但對於頻繁使用的指令就會感到繁瑣，<br>因此 Vue 提供了 <code>v-bind</code> 和 <code>v-on</code> 這兩個最常使用的指令提供了簡寫：</p><h4 id="v-bind-縮寫">v-bind 縮寫</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 完整語法 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 縮寫 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 動態參數的縮寫 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:</span>[<span class="hljs-attr">key</span>]=<span class="hljs-string">&quot;url&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="v-on-縮寫">v-on 縮寫</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 完整語法 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 縮寫 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 動態參數的縮寫 (2.6.0+) --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> @[<span class="hljs-attr">event</span>]=<span class="hljs-string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="注意事項">注意事項</h3><h4 id="動態參數的規定">動態參數的規定</h4><p>動態參數預期是一個字符串，異常下為 <code>null</code>。<br>任何非字符串的類型的值都將觸發一個警告。</p><h4 id="對動態參數表達是的規定">對動態參數表達是的規定</h4><p>動態參數表達式有一些語法約束，因為某些字符，如空格和引號，放在 HTML attribute 名裡是無效的。<br>例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 這會觸發一個編譯警告 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[&#x27;<span class="hljs-attr">foo</span>&#x27; + <span class="hljs-attr">bar</span>]=<span class="hljs-string">&quot;value&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>解決的辦法是使用沒有空格或引號的表達式，<br>或用 <code>computed</code> property（計算屬性） 替代這種複雜表達式。</p><p>在 DOM 中使用模板時 (直接在一個 HTML 檔案裡撰寫模板)，還需要避免使用大寫字符來命名鍵名，因為瀏覽器會把 attribute 名稱全部強制轉為小寫：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">在 DOM 中使用模板時這段動態參數會被轉換為 `v-bind:[someattr]`。</span><br><span class="hljs-comment">除非在實例中有一個名為“someattr”的 property。</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:</span>[<span class="hljs-attr">someAttr</span>]=<span class="hljs-string">&quot;value&quot;</span>&gt;</span> ... <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="JavaScript-表達式-2">JavaScript 表達式</h4><p>模板表達式都被放在沙盒中，只能使用全局變量的一個白名單，例如 Math 和 Date。<br>你不應該在模板表達式中試圖使用自定義的全局變量。</p><h2 id="Data-Property-和-方法">Data Property 和 方法</h2><h3 id="Data-Property">Data Property</h3><p>組件的 <code>data</code> 選項是一個函式。</p><p>Vue 在創建組件的實例過程中調用此函式，它應該返回一個物件，<br>然後 Vue 會透過響應式系統將其包裹起來，並以 <code>$data</code> 的形式儲存在組件實例中。</p><p>為了方便起見，該物件的所有頂級 property 也直接透過組件實例暴露出來：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.create(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      count: <span class="hljs-number">69</span><br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">const</span> vm = app.mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br><span class="hljs-built_in">console</span>.log(vm.$data.count) <span class="hljs-comment">// 69</span><br>consol.log(vm.count) <span class="hljs-comment">// 69</span><br><br>vm.count = <span class="hljs-number">68</span><br><span class="hljs-built_in">console</span>.log(vm.$data.count) <span class="hljs-comment">// 68</span><br><br>vm.$data.count = <span class="hljs-number">67</span><br><span class="hljs-built_in">console</span>.log(vm.count) <span class="hljs-comment">// 67</span><br></code></pre></td></tr></table></figure><p>這些實例 property 僅在實例首次創建時被添加，所以需要確保它們都在 data 函式返回的物件中。<br>必要時，要對尚未提供所需值的 property 使用 <code>null</code> 或 <code>undefined</code> 或其他佔位的值。</p><p>直接將不包含在 data 中的新 property 添加到組件實例是可行的。<br>但由於該 property 不在背後的響應式 <code>$data</code> 物件內，所以 Vue 的響應式系統不會自動追蹤它。</p><p>Vue 使用 <code>$</code> 前綴通過組件實例暴露自己的內置 API。<br>它還為內部 property 保留 <code>_</code> 前綴。<br>應該避免使用這兩個字符開頭的的頂級 data property 名稱。</p><h3 id="方法">方法</h3><p>使用 <code>methods</code> 選項向組件實例添加方法，它是一個包含所需方法的物件，<br>Vue 會透過組件實例暴露該物件的所有頂級 property：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">4</span> &#125;<br>  &#125;,<br>  methods: &#123;<br>    increment() &#123;<br>      <span class="hljs-comment">// `this` 指向組件實例</span><br>      <span class="hljs-built_in">this</span>.count++<br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">const</span> vm = app.mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br><span class="hljs-built_in">console</span>.log(vm.count) <span class="hljs-comment">// =&gt; 4</span><br><br>vm.increment()<br><br><span class="hljs-built_in">console</span>.log(vm.count) <span class="hljs-comment">// =&gt; 5</span><br></code></pre></td></tr></table></figure><p>Vue 自動為 <code>methods</code> 綁定 <code>this</code>，以便於它始終指向組件實例。<br>這將確保方法在用作事件監聽或回調時保持正確的 <code>this</code> 指向。<br>在定義 <code>methods</code> 時應避免使用箭頭函式，因為這會阻止 Vue 綁定恰當的 <code>this</code> 指向。</p><p>這些 <code>methods</code> 和組件實例的其它所有 property 一樣可以在組件的模板中被訪問。<br>在模板中，它們通常被當做事件監聽使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>投票<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>以上這個例子，點擊按鈕時就會調用 <code>increment</code> 方法。</p><p>也可以直接從模板中調用方法。，通常換做 <code>計算屬性</code> 會更好。<br>但是，在 <code>計算屬性</code> 不可行的情況下，使用方法可能會很有用。<br>你可以在模板支持 <code>JavaScript 表達式</code> 的任何地方調用方法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;toTitleDate(date)&quot;</span>&gt;</span><br>  &#123;&#123; formatDate(date) &#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果 <code>toTitleDate</code> 或 <code>formatDate</code> 訪問任何響應式數據，則將其作為渲染依賴項進行追蹤，就像直接在模板中使用過一樣。</p><p>從模板調用的方法不應該有任何副作用，比如更改數據或觸發異步進程。不過這應該要使用生命週期鉤子。</p><blockquote><p>這裡指的 更改數據 是指 <code>ref</code> 或者 <code>reactive</code> 的數據。（會導致重新渲染頁面）</p></blockquote><h3 id="防抖與節流">防抖與節流</h3><blockquote><p>函式防抖 與 函式節流 主要用於優化高頻率執行 JavaScript 程式碼的一種手段。<br>函式防抖：在一段連續操作結束後，處理回調。（主要利用 clearTimeout 和 setTimeout 實現）<br>函式節流：在一段連續操作中，每段時間只執行一次（只利用了 setTimeout 實現）</p></blockquote><p>Vue 沒有內置支援防抖和節流，但可以使用 Loadash 第三方庫實現。</p><p>如果某個組件僅使用一次，可以在 methods 中直接應用防抖：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  methods: &#123;<br>    <span class="hljs-comment">// Lodash 的防抖函式</span><br>    click: _.debounce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-comment">// 響應點擊</span><br>    &#125;, <span class="hljs-number">500</span>)<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>但是，這種方法對於可複用組件有潛在的問題，因為它們都共享相同的防抖函式。<br>為了使組件實例彼此獨立，可以在生命週期鉤子的 <code>created</code> 裡添加該防抖函式:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js">app.component(<span class="hljs-string">&#x27;save-button&#x27;</span>, &#123;<br>  created() &#123;<br>    <span class="hljs-comment">// Lodash 的防抖函式</span><br>    <span class="hljs-built_in">this</span>.debouncedClick = _.debounce(<span class="hljs-built_in">this</span>.click, <span class="hljs-number">500</span>)<br>  &#125;,<br>  unmounted() &#123;<br>    <span class="hljs-comment">// 移除組件時，取消定時器</span><br>    <span class="hljs-built_in">this</span>.debouncedClick.cancel()<br>  &#125;,<br>  methods: &#123;<br>    click() &#123;<br>      <span class="hljs-comment">// 響應點擊</span><br>    &#125;<br>  &#125;,<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;button @click=&quot;debouncedClick&quot;&gt;</span><br><span class="hljs-string">      保存</span><br><span class="hljs-string">    &lt;/button&gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="計算屬性-和-監聽器">計算屬性 和 監聽器</h2><h3 id="計算屬性">計算屬性</h3><p>模板內的表達式非常便利，但是設計它們的初衷是用於簡單運算的。<br>在模板中放入太多的邏輯會讓模板且難以維護。例如，有一個嵌套陣列物件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      author: &#123;<br>        name: <span class="hljs-string">&#x27;John Doe&#x27;</span>,<br>        books: [<br>          <span class="hljs-string">&#x27;Vue 2 - Advanced Guide&#x27;</span>,<br>          <span class="hljs-string">&#x27;Vue 3 - Basic Guide&#x27;</span>,<br>          <span class="hljs-string">&#x27;Vue 4 - The Mystery&#x27;</span><br>        ]<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>根據 <code>author</code> 是否已經有一些書來顯示不同的訊息：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;computed-basics&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Has published books:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; author.books.length &gt; 0 ? &#x27;Yes&#x27; : &#x27;No&#x27; &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>此時，模板不再是簡單的和聲明性的。<br>你必須先看一下它，然後才能意識到它執行的計算取決於 <code>author.books</code>。<br>如果要在模板中多次包含此計算，則問題會變得更糟。</p><p>所以，對於任何包含響應式數據的複雜邏輯，都應該使用計算屬性。</p><h4 id="例子">例子</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;computed-basics&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Has published books:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; publishedBooksMessage &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      author: &#123;<br>        name: <span class="hljs-string">&#x27;John Doe&#x27;</span>,<br>        <span class="hljs-comment">// 判斷這裡 books 的數量</span><br>        books: [<br>          <span class="hljs-string">&#x27;Vue 2 - Advanced Guide&#x27;</span>,<br>          <span class="hljs-string">&#x27;Vue 3 - Basic Guide&#x27;</span>,<br>          <span class="hljs-string">&#x27;Vue 4 - The Mystery&#x27;</span><br>        ]<br>      &#125;<br>    &#125;<br>  &#125;,<br>  computed: &#123;<br>    <span class="hljs-comment">// 計算屬性的 getter</span><br>    publishedBooksMessage() &#123;<br>      <span class="hljs-comment">// `this` 指向 vm 實例</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.author.books.length &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&#x27;Yes&#x27;</span> : <span class="hljs-string">&#x27;No&#x27;</span><br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#computed-basics&#x27;</span>)<br></code></pre></td></tr></table></figure><p>這裡聲明了一個計算屬性 <code>publishedBooksMessage</code>。</p><p>嘗試更改應用程序 <code>data</code> 中 <code>books</code> 陣列的值，你將看到 <code>publishedBooksMessage</code> 如何相應地更改。</p><p>你可以像普通屬性一樣將數據綁定到模板中的計算屬性。<br>Vue 知道 <code>vm.publishedBookMessage</code> 依賴於 <code>vm.author.books</code> ，因此當 <code>vm.author.books</code> 發生改變時，所有依賴 <code>vm.publishedBookMessage</code> 的綁定也會更新。<br>計算屬性的 getter 函式沒有副作用，它更易於測試和理解。</p><h4 id="計算屬性緩存-vs-方法">計算屬性緩存 vs 方法</h4><p>透過表達式調用方法也可以達到同樣的效果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; calculateBooksMessage() &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 在組件中</span><br>methods: &#123;<br>  calculateBooksMessage() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.author.books.length &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&#x27;Yes&#x27;</span> : <span class="hljs-string">&#x27;No&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>我們可以將同一函式定義為一個方法而不是一個計算屬性。兩種方式的最終結果確實是完全相同的。<br>然而，不同的是計算屬性是基於它們的反應依賴關係緩存的。計算屬性只在相關響應式依賴發生改變時它們才會重新求值。<br>這就意味著只要 <code>author.books</code> 還沒有發生改變，多次訪問 <code>publishedBookMessage</code> 計算屬性會立即返回之前的計算結果，而不必再次執行函式。</p><p>這也同樣意味著下面的計算屬性將不再更新，因為 <code>Date.now()</code> 不是響應式依賴：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 在組件中</span><br>computed: &#123;<br>  now() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.now()<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>相比之下，每當觸發重新渲染時，調用方法將總會再次執行函式。</p><p>為什麼需要緩存？假設有一個性能開銷比較大的計算屬性 <code>list</code>，它需要遍歷一個巨大的陣列並做大量的計算。<br>然後我們可能有其他的計算屬性依賴於 <code>list</code>。如果沒有緩存，將不可避免的多次執行 <code>list</code> 的 getter。<br>如果你不希望有緩存，請用 <code>method</code> 來替代。</p><h4 id="計算屬性的-Setter">計算屬性的 Setter</h4><p>計算屬性默認只有 getter，不過在需要的時候也可以設定一個 setter：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ...</span><br>computed: &#123;<br>  fullName: &#123;<br>    <span class="hljs-comment">// getter</span><br>    get() &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.firstName + <span class="hljs-string">&#x27; &#x27;</span> + <span class="hljs-built_in">this</span>.lastName<br>    &#125;,<br>    <span class="hljs-comment">// setter</span><br>    set(newValue) &#123;<br>      <span class="hljs-keyword">const</span> names = newValue.split(<span class="hljs-string">&#x27; &#x27;</span>)<br>      <span class="hljs-built_in">this</span>.firstName = names[<span class="hljs-number">0</span>]<br>      <span class="hljs-built_in">this</span>.lastName = names[names.length - <span class="hljs-number">1</span>]<br>    &#125;<br>  &#125;<br>&#125;<br><span class="hljs-comment">// ...</span><br></code></pre></td></tr></table></figure><p>現在使用 <code>vm.fullName = 'John Doe'</code> 時，<br><code>setter</code> 會被調用，<code>vm.firstName</code> 和 <code>vm.lastName</code> 也會相應地被更新。</p><h3 id="監聽器">監聽器</h3><p>雖然計算屬性在大多數情況下更合適，但有時也需要一個自定義的監聽器。<br>這就是為什麼 Vue 通過 <code>watch</code> 選項提供了一個更通用的方法，來<code>響應數據的變化</code>。<br><code>當需要在數據變化時執行異步或開銷較大的操作時，這個方式是最有用的。</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;watch-example&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    Ask a yes/no question:<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;question&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; answer &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">const</span> watchExampleVM = Vue.createApp(&#123;</span><br>    data() &#123;<br><span class="javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">        question: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="javascript">        answer: <span class="hljs-string">&#x27;Questions usually contain a question mark. ;-)&#x27;</span></span><br>      &#125;<br>    &#125;,<br>    watch: &#123;<br><span class="javascript">      <span class="hljs-comment">// 當 vm.question 改變時，這個函式都會被調用</span></span><br>      question(newQuestion, oldQuestion) &#123;<br><span class="javascript">        <span class="hljs-keyword">if</span> (newQuestion.indexOf(<span class="hljs-string">&#x27;?&#x27;</span>) &gt; <span class="hljs-number">-1</span>) &#123;</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.getAnswer()</span><br>        &#125;<br>      &#125;<br>    &#125;,<br>    methods: &#123;<br>      getAnswer() &#123;<br><span class="javascript">        <span class="hljs-built_in">this</span>.answer = <span class="hljs-string">&#x27;Thinking...&#x27;</span></span><br>        axios<br><span class="javascript">          .get(<span class="hljs-string">&#x27;https://yesno.wtf/api&#x27;</span>)</span><br><span class="javascript">          .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">this</span>.answer = response.data.answer</span><br>          &#125;)<br><span class="javascript">          .catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">this</span>.answer = <span class="hljs-string">&#x27;Error! Could not reach the API. &#x27;</span> + error</span><br>          &#125;)<br>      &#125;<br>    &#125;<br><span class="javascript">  &#125;).mount(<span class="hljs-string">&#x27;#watch-example&#x27;</span>)</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在這個示例中，使用 <code>watch</code> 選項允許我們執行異步操作 (訪問一個 API)，限制我們執行該操作的頻率，並在我們得到最終結果前，設置中間狀態。這些都是計算屬性無法做到的。</p><p>除了 <code>watch</code> 選項之外，你還可以使用命令式的 <code>vm.$watch</code> API。</p><h4 id="計算屬性-vs-監聽器">計算屬性 vs 監聽器</h4><p>Vue 提供了一種更通用的方式來觀察和響應當前活動的實例上的數據變動：監聽屬性。<br>當你有一些數據需要隨著其它數據變動而變動時，你很容易濫用 <code>watch</code>。<br>然而，通常更好的做法是使用計算屬性而不是命令式的 <code>watch</code> 回調。<br>細想一下這個例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>監聽器：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> vm = Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      firstName: <span class="hljs-string">&#x27;Foo&#x27;</span>,<br>      lastName: <span class="hljs-string">&#x27;Bar&#x27;</span>,<br>      fullName: <span class="hljs-string">&#x27;Foo Bar&#x27;</span><br>    &#125;<br>  &#125;,<br>  watch: &#123;<br>    firstName(val) &#123;<br>      <span class="hljs-built_in">this</span>.fullName = val + <span class="hljs-string">&#x27; &#x27;</span> + <span class="hljs-built_in">this</span>.lastName<br>    &#125;,<br>    lastName(val) &#123;<br>      <span class="hljs-built_in">this</span>.fullName = <span class="hljs-built_in">this</span>.firstName + <span class="hljs-string">&#x27; &#x27;</span> + val<br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#demo&#x27;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>計算屬性：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> vm = Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      firstName: <span class="hljs-string">&#x27;Foo&#x27;</span>,<br>      lastName: <span class="hljs-string">&#x27;Bar&#x27;</span><br>    &#125;<br>  &#125;,<br>  computed: &#123;<br>    fullName() &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.firstName + <span class="hljs-string">&#x27; &#x27;</span> + <span class="hljs-built_in">this</span>.lastName<br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#demo&#x27;</span>)<br></code></pre></td></tr></table></figure><p>這個例子中，監聽器 有太多的重復程式碼，使用 計算屬性 比較洽當。</p><h2 id="Class-與-Style-綁定">Class 與 Style 綁定</h2><p>操作元素的 <code>class 列表</code> 和 <code>內聯樣式</code> 是數據綁定的一個常見需求。<br>因為它們都是 attribute，所以我們可以用 <code>v-bind</code>處理它們：只需要通過表達式計算出字符串結果即可。<br>不過，字符串拼接麻煩且易錯。因此，在將 <code>v-bind</code> 用於 <code>class</code> 和 <code>style</code> 時，Vue 做了專門的增強。<br>表達式結果的類型除了字符串之外，還可以是物件或陣列。</p><h3 id="綁定-HTML-Class">綁定 HTML Class</h3><h4 id="物件語法">物件語法</h4><p>可以傳給 <code>:class</code> 一個物件，以動態地切換 <code>class</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; active: isActive &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>上面的語法表示 <code>active</code> 這個 <code>class</code> 存在與否將取決於數據 property <code>isActive</code> 的 <code>truthiness</code>。</p><blockquote><p>你可以在物件中傳入更多字段來動態切換多個 <code>class</code>。此外，<code>:class</code> 指令也可以與普通的 <code>class</code> attribute 共存。如下模板：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span><br><span class="hljs-tag">  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;static&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError &#125;&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    isActive: <span class="hljs-literal">true</span>,<br>    hasError: <span class="hljs-literal">false</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>渲染的結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;static active&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>當 <code>isActive</code> 或者 <code>hasError</code> 變化時，<code>class</code> 列表將相應地更新。<br>例如，如果 <code>hasError</code> 的值為 <code>true</code>，<code>class</code> 列表將變為 <code>&quot;static active text-danger&quot;</code>。</p><blockquote><p>綁定的數據物件不必內聯定義在模板裡：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObject&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    classObject: &#123;<br>      <span class="hljs-comment">// JavaScript 的 物件鍵名 就是字符串，所以可以省略引號。</span><br>      active: <span class="hljs-literal">true</span>,<br>      <span class="hljs-string">&#x27;text-danger&#x27;</span>: <span class="hljs-literal">false</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>渲染的結果與上一個案例相同：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;static active&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>這個案例也可以綁定一個返回物件的計算屬性。這是一個常用且強大的模式：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObject&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    isActive: <span class="hljs-literal">true</span>,<br>    error: <span class="hljs-literal">null</span><br>  &#125;<br>&#125;,<br>computed: &#123;<br>  classObject() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      active: <span class="hljs-built_in">this</span>.isActive &amp;&amp; !<span class="hljs-built_in">this</span>.error,<br>      <span class="hljs-string">&#x27;text-danger&#x27;</span>: <span class="hljs-built_in">this</span>.error &amp;&amp; <span class="hljs-built_in">this</span>.error.type === <span class="hljs-string">&#x27;fatal&#x27;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="陣列語法">陣列語法</h4><p>可以把一個陣列傳給 <code>:class</code>，以應用一個 <code>class</code> 列表：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[activeClass, errorClass]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    activeClass: <span class="hljs-string">&#x27;active&#x27;</span>,<br>    errorClass: <span class="hljs-string">&#x27;text-danger&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>渲染的結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;active text-danger&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果你想根據條件切換列表中的 <code>class</code>，可以使用三元表達式：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[isActive ? activeClass : &#x27;&#x27;, errorClass]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這樣寫將始終添加 <code>errorClass</code>，只有在 <code>isActive</code> 為 <code>truthy</code> 時才添加 <code>activeClass</code>。</p><p>不過，當有多個條件 <code>class</code> 時這樣寫有些繁瑣。所以在陣列語法中也可以使用物件語法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[&#123; active: isActive &#125;, errorClass]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="綁定內聯樣式">綁定內聯樣式</h3><h4 id="物件語法-2">物件語法</h4><p><code>:style</code> 的物件語法十分直觀 —— 看著非常像 CSS，但其實是一個 JavaScript 物件。CSS property 名可以用駝峰式 (camelCase) 或短橫線分隔 (kebab-case，記得用引號括起來) 來命名：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; color: activeColor, fontSize: fontSize + &#x27;px&#x27; &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    activeColor: <span class="hljs-string">&#x27;red&#x27;</span>,<br>    fontSize: <span class="hljs-number">30</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>直接綁定到一個樣式物件通常更好，這會讓模板更清晰：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;styleObject&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    styleObject: &#123;<br>      color: <span class="hljs-string">&#x27;red&#x27;</span>,<br>      fontSize: <span class="hljs-string">&#x27;13px&#x27;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>同樣的，物件語法常常結合返回物件的計算屬性使用。</p></blockquote><h4 id="陣列語法-2">陣列語法</h4><p><code>:style</code> 的陣列語法可以將多個樣式物件應用到同一個元素上：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[baseStyles, overridingStyles]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="自動添加前餟">自動添加前餟</h4><p>在 <code>:style</code> 中使用需要 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Vendor_Prefix">瀏覽器引擎前綴</a> (vendor prefixes) 的 CSS property 時，<br>如 <code>transform</code>，Vue 將自動偵測並添加相應的前綴。</p><h4 id="多重值">多重值</h4><p>可以為 style 綁定中的 property 提供一個包含多個值的陣列，常用於提供多個帶前綴的值，例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; display: [&#x27;-webkit-box&#x27;, &#x27;-ms-flexbox&#x27;, &#x27;flex&#x27;] &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這樣寫只會渲染陣列中最後一個被瀏覽器支持的值。<br>在上面的例子中，如果瀏覽器支持不帶瀏覽器前綴的 flexbox，那麼就只會渲染 <code>display: flex</code>。</p><h2 id="條件渲染">條件渲染</h2><h3 id="v-if">v-if</h3><p><code>v-if</code> 指令用於條件性地渲染一塊內容。這塊內容只會在指令的表達式返回 <code>truthy</code> 值的時候被渲染。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;awesome&quot;</span>&gt;</span>Vue is awesome!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="template-元素">&lt;template&gt; 元素</h4><p>因為 <code>v-if</code> 是一個指令，所以必須將它添加到一個元素上。但是如果想切換多個元素呢？此時可以把一個 <code>&lt;template&gt;</code> 元素當做不可見的包裹元素，並在上面使用 <code>v-if</code>。<br>最終的渲染結果將不包含 <code>&lt;template&gt;</code> 元素。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;ok&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Paragraph 1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Paragraph 2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="v-else">v-else</h4><p>使用 <code>v-else</code> 指令表示 <code>v-if</code> 的 <code>else 塊</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;Math.random() &gt; 0.5&quot;</span>&gt;</span><br>  Now you see me<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span><br>  Now you don&#x27;t<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>v-else</code> 元素必須緊跟在帶 <code>v-if</code> 或者 <code>v-else-if</code> 的元素的後面，否則它將不會被識別。</p><h4 id="v-else-if">v-else-if</h4><p><code>v-else-if</code>，顧名思義，充當 <code>v-if</code> 的 <code>else-if 塊</code>，並且可以連續使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span><br>  A<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span><br>  B<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span><br>  C<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span><br>  Not A/B/C<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>與 <code>v-else</code> 的用法類似，<code>v-else-if</code> 也必須緊跟在帶 <code>v-if</code> 或者 <code>v-else-if</code> 的元素之後。</p><h3 id="v-show">v-show</h3><p>另一個用於條件性展示元素的選項是 <code>v-show</code> 指令。用法與 <code>v-if</code> 大致一樣：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;ok&quot;</span>&gt;</span>Hello!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><p>不同的是帶有 <code>v-show</code> 的元素始終會被渲染並保留在 DOM 中。<code>v-show</code> 只是簡單地切換元素的 CSS property <code>display</code>。</p><p>注意，<code>v-show</code> 不支持 <code>&lt;template&gt;</code> 元素，也不支持 <code>v-else</code>。</p><h3 id="v-if-vs-v-show">v-if vs v-show</h3><p><code>v-if</code> 是 “真正” 的條件渲染，因為它會確保在切換過程中，條件塊內的事件監聽器和子組件適當地被銷毀和重建。<br><code>v-if</code> 也是惰性的：如果在初始渲染時條件為 <code>false</code>，則什麼也不做 —— 直到條件第一次變為 <code>true</code> 時，才會開始渲染條件塊。</p><p>相比之下，<code>v-show</code> 就簡單得多 —— 不管初始條件是什麼，元素總是會被渲染，並且只是簡單地基於 CSS 進行切換。</p><p>一般來說，<code>v-if</code> 有更高的切換開銷，而 <code>v-show</code> 有更高的初始渲染開銷。</p><blockquote><p>因此，如果需要非常頻繁地切換，使用 <code>v-show</code> 較好；如果在運行時條件很少改變，使用 <code>v-if</code> 較好。</p></blockquote><h2 id="列表渲染">列表渲染</h2><h3 id="v-for-陣列">v-for 陣列</h3><p>可以使用 <code>v-for</code> 指令渲染一個陣列。<br><code>v-for</code> 指令需要使用 <code>item in items</code> 型式的特殊語法，而 <code>item</code> 就是被迭代的陣列元素<code>別名</code>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;array-rendering&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span>&gt;</span><br>    &#123;&#123; item.message &#125;&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      items: [&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Foo&#x27;</span> &#125;, &#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Bar&#x27;</span> &#125;]<br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#array-rendering&#x27;</span>)<br></code></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;array-rendering&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Foo<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Bar<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>在 <code>v-for</code> 塊中，可以訪問所有父作用域的 property。<br><code>v-for</code> 還支援一個可選的第二個參數，即當前項的索引值。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;array-with-index&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, index) in items&quot;</span>&gt;</span><br>    &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;array-with-index&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Parent - 0 - Foo<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Parent - 1 - Bar<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>也可以使用 <code>of</code> 代替 <code>in</code> 作為分隔符，因為他更接近 JavaScript 迭代器的語法：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item of items&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-for-物件">v-for 物件</h3><p><code>v-for</code> 也可以用來遍歷一個物件 property。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;v-for-object&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;value in myObject&quot;</span>&gt;</span><br>    &#123;&#123; value &#125;&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      myObject: &#123;<br>        title: <span class="hljs-string">&#x27;How to do lists in Vue&#x27;</span>,<br>        author: <span class="hljs-string">&#x27;Jane Doe&#x27;</span>,<br>        publishedAt: <span class="hljs-string">&#x27;2016-04-10&#x27;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#v-for-object&#x27;</span>)<br></code></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;v-for-object&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>How to do list in Vue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Jane Doe<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2016-04-10<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>也可以提供第二個參數作為 property 名稱（鍵名 key）：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(value, name) in myObject&quot;</span>&gt;</span><br>  &#123;&#123; name &#125;&#125;: &#123;&#123; value &#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br></code></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;v-for-object&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>title: How to do list in Vue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>author: Jane Doe<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>publishedAt: 2016-04-10<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>還可以提供第三個參數作為索引值：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(value, name, index) in myObject&quot;</span>&gt;</span><br>  &#123;&#123; index &#125;&#125;. &#123;&#123; name &#125;&#125;: &#123;&#123; value &#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br></code></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;v-for-object&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>0. title: How to do list in Vue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1. author: Jane Doe<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2. publishedAt: 2016-04-10<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>在遍歷物件時，會按 <code>Object.keys()</code> 的結果遍歷，但是不能保證它在不同 JavaScript 引擎下的結果都一致。</p></blockquote><h3 id="維護狀態">維護狀態</h3><p>當 Vue 正在更新使用 <code>v-for</code> 渲染的元素列表時，它默認使用 “就地更新” 的策略。<br>如果數據項的順序被改變，Vue 將不會移動 DOM 元素來匹配數據項的順序，而是就地更新每個元素，並且確保它們在每個索引位置正確渲染。</p><p>這個默認的模式是高效的，但是<code>只適用於不依賴子組件狀態或臨時 DOM 狀態 (例如：表單輸入值) 的列表渲染輸出</code>。</p><p>為了給 Vue 一個提示，以便它能跟踪每個節點的身份，從而重用和重新排序現有元素，你需要為每項提供一個唯一 <code>key</code> attribute：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- content --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>建議盡可能在使用 <code>v-for</code> 時提供 <code>key</code> attribute，除非遍歷輸出的 DOM 內容非常簡單，或者是刻意依賴默認行為（就地更新）以獲取性能上的提升。</p><p>因為它是 Vue 識別節點的一個通用機制，<code>key</code> 並不僅與 <code>v-for</code> 特別關聯。</p><blockquote><p>不要使用物件或陣列之類的非基本類型值作為 <code>v-for</code> 的 <code>key</code>。請用字符串或數值類型的值。</p></blockquote><h3 id="陣列更新檢測">陣列更新檢測</h3><h4 id="變更方法">變更方法</h4><p>Vue 將被監聽的陣列的變更方法進行了包裹，所以它們也將會觸發視圖更新。這些被包裹過的方法包括：</p><ul><li>push()</li><li>pop()</li><li>shitft()</li><li>unshift()</li><li>splice()</li><li>sort()</li><li>reverse()</li></ul><h4 id="替換陣列">替換陣列</h4><p>變更方法，顧名思義，會變更調用了這些方法的原始陣列。<br>相比之下，也有非變更方法，例如 <code>filter()</code>, <code>concat()</code> 和 <code>slice()</code>，<br>它們不會變更原始陣列，而總是返回一個新陣列。</p><p>當使用非變更方法時，可以用新陣列替換舊陣列：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">example1.items = example1.items.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.message.match(<span class="hljs-regexp">/Foo/</span>))<br></code></pre></td></tr></table></figure><p>你可能認為這將導致 Vue 丟棄現有 DOM 並重新渲染整個列表。幸運的是，事實並非如此。<br>Vue 為了使得 DOM 元素得到最大範圍的重用而實現了一些智能的啟發式方法，所以用一個含有相同元素的陣列去替換原來的陣列是非常高效的操作。</p><h4 id="顯示過濾-排序後的結果">顯示過濾 / 排序後的結果</h4><p>有時，我們想要顯示一個陣列經過過濾或排序後的版本，而不實際變更或重置原始數據。<br>在這種情況下，可以創建一個計算屬性，來返回過濾或排序後的陣列。</p><p>例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;n in evenNumbers&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span>&#123;&#123; n &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    numbers: [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]<br>  &#125;<br>&#125;,<br>computed: &#123;<br>  evenNumbers() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.numbers.filter(<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> number % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>在計算屬性不適用的情況下 (例如，在嵌套 <code>v-for</code> 循環中) 你可以使用一個方法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;numbers in sets&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;n in even(numbers)&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span>&#123;&#123; n &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    sets: [[ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]]<br>  &#125;<br>&#125;,<br>methods: &#123;<br>  even(numbers) &#123;<br>    <span class="hljs-keyword">return</span> numbers.filter(<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> number % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="在-v-for-裡使用值的範圍">在 v-for 裡使用值的範圍</h4><p>v-for 也可以接受整數。在這種情況下，它會把模板重複對應次數。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;range&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;n in 10&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span>&#123;&#123; n &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;range&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>7<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="在-template-中使用-v-for">在 &lt;template&gt; 中使用 v-for</h4><p>類似於 <code>v-if</code>，也可以利用帶有 <code>v-for</code> 的 <code>&lt;template&gt;</code> 來循環渲染一段包含多個元素的內容：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.msg&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>&#123;&#123; item.msg &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;divider&quot;</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;presentation&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="v-for-與-v-if-一同使用">v-for 與 v-if 一同使用</h4><blockquote><p>不推薦在同一元素上使用 <code>v-if</code> 和 <code>v-for</code>。</p></blockquote><p>當它們處於同一節點，<code>v-if</code> 的優先級比 <code>v-for</code> 更高，這意味著 <code>v-if</code> 將沒有權限訪問 <code>v-for</code> 裡的變量：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 這裡將引發錯誤，因為 todo 不存在 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;todo in todos&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;!todo.isComplete&quot;</span>&gt;</span><br>  &#123;&#123; todo.name &#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可以把 <code>v-for</code> 移動到 &lt;template&gt; 標籤中來解決：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;todo in todos&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;todo.name&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;!todo.isComplete&quot;</span>&gt;</span><br>    &#123;&#123; todo.name &#125;&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="事件處理">事件處理</h2><p>可以使用 <code>v-on</code>（簡寫：<code>@</code>）指令來監聽 DOM 事件，並在觸發事件時執行一些 JavaScript。</p><p>例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;basic-event&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;counter += 1&quot;</span>&gt;</span>加一<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>上面的按鈕已被點擊 &#123;&#123; counter &#125;&#125; 次。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      counter: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#basic-event&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="事件處理方法">事件處理方法</h3><p>有許多事件處理邏輯會更加複雜，因此 <code>v-on</code> 還可以接收一個需要調用的方法名稱：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;event-with-method&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- `greet` 是下方定義的方法 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;greet&quot;</span>&gt;</span>Greet<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      name: <span class="hljs-string">&#x27;Vue.js&#x27;</span><br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    greet(event) &#123;<br>      <span class="hljs-comment">// `methods` 內部的 `this` 指向活動實例</span><br>      alert(<span class="hljs-string">&#x27;Hello &#x27;</span> + <span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;!&#x27;</span>)<br>      <span class="hljs-comment">// `event` 是原生 DOM event</span><br>      <span class="hljs-keyword">if</span> (event) &#123;<br>        alert(event.target.tagName)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#event-with-method&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="內聯處理器中的方法">內聯處理器中的方法</h3><p>除了直接綁定方法，也可以在內聯 JavaScript 語句中調用方法（無需柯里化）：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inline-handler&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;say(&#x27;hi&#x27;)&quot;</span>&gt;</span>Say hi<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;say(&#x27;what&#x27;)&quot;</span>&gt;</span>Say what<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.createApp(&#123;<br>  methods: &#123;<br>    say(message) &#123;<br>      alert(message)<br>    &#125;<br>  &#125;<br>&#125;).mount(<span class="hljs-string">&#x27;#inline-handler&#x27;</span>)<br></code></pre></td></tr></table></figure><p>有時也需要訪問原始的 DOM 事件，可以使用特殊變量 <code>$event</code>傳入方法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;warn(&#x27;此表單還無法提交。&#x27;, $event)&quot;</span>&gt;</span><br>  提交<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ...</span><br>methods: &#123;<br>  warn(message, event) &#123;<br>    <span class="hljs-comment">// 這個 event 是 $event 特殊變量 = DOM 事件</span><br>    <span class="hljs-keyword">if</span> (event) &#123;<br>      event.preventDefault()<br>    &#125;<br>    alert(message)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>整理所有情況：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handelClick&quot;</span>&gt;</span>不調用<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handelClick()&quot;</span>&gt;</span>調用沒傳參<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handelClick(&#x27;哈囉&#x27;)&quot;</span>&gt;</span>調用傳參<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handelClick(&#x27;Nyahello&#x27;, $event)&quot;</span>&gt;</span>調用傳參和 DOM 事件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>methods: &#123;<br>  handelClick(msg = <span class="hljs-string">&#x27;無值&#x27;</span>, event = <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-built_in">console</span>.log(msg, event)<br>  &#125;,<br></code></pre></td></tr></table></figure><p>按照順序輸出結果：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">=&gt; MouseEvent <span class="hljs-literal">null</span><br>=&gt; <span class="hljs-string">&#x27;無值&#x27;</span> <span class="hljs-literal">null</span><br>=&gt; <span class="hljs-string">&#x27;哈囉&#x27;</span> <span class="hljs-literal">null</span><br>=&gt; <span class="hljs-string">&#x27;Nyahello&#x27;</span> MouseEvent<br></code></pre></td></tr></table></figure><h3 id="多事件處理器">多事件處理器</h3><p>事件處理程序中可以有多個方法，這些方法由逗號運算符分隔：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 這兩個 one() 和 two() 將執行按鈕點擊事件 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;one($event), two($event)&quot;</span>&gt;</span><br>  發送<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ...</span><br>methods: &#123;<br>  one(event) &#123;<br>    <span class="hljs-comment">// 第一個事件處理邏輯...</span><br>  &#125;,<br>  two(event) &#123;<br>   <span class="hljs-comment">// 第二個事件處理邏輯...</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="事件修飾符">事件修飾符</h3><p>在事件方法中調用 <code>event.preventDefault()</code> 或 <code>event.stopPropagation()</code> 是非常常見的需求。<br>儘管可以在方法中輕鬆實現這點，但更好的方式是：方法只有純粹的數據邏輯，而不是去處理 DOM 事件細節。</p><p>為了解決這個問題，Vue 為 <code>v-on</code> 提供了事件修飾符。修飾符是由點開頭的指令後綴來表示的。</p><ul><li><code>.stop</code></li><li><code>.prevent</code></li><li><code>.capture</code></li><li><code>.self</code></li><li><code>.once</code></li><li><code>.passive</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 阻止單擊事件繼續傳播 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">&quot;doThis&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 提交事件不再重載頁面 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">&quot;onSubmit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 修飾符可以串聯 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> @<span class="hljs-attr">click.stop.prevent</span>=<span class="hljs-string">&quot;doThat&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 只有修飾符 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 添加事件監聽器時使用事件捕獲模式 --&gt;</span><br><span class="hljs-comment">&lt;!-- 即內部元素觸發的事件先在此處理，然後才交由內部元素進行處理 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> @<span class="hljs-attr">click.capture</span>=<span class="hljs-string">&quot;doThis&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 只當在 event.target 是當前元素自身時觸發處理函式 --&gt;</span><br><span class="hljs-comment">&lt;!-- 即事件不是從內部元素觸發的 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> @<span class="hljs-attr">click.self</span>=<span class="hljs-string">&quot;doThat&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>使用修飾符時，順序很重要；相應的程式碼會以同樣的順序產生。因此，用 <code>@:click.prevent.self</code> 會阻止所有的點擊，而 <code>@:click.self.prevent</code> 只會阻止對元素自身的點擊。</p></blockquote><h3 id="按鍵修飾符">按鍵修飾符</h3><p>在監聽鍵盤事件時，經常需要檢查詳細的按鍵。Vue 允許為 <code>v-on</code> 或者 <code>@</code> 在監聽鍵盤事件時添加按鍵修飾符：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 只有在 `key` 是 `Enter` 時調用 `vm.submit()` --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>可以將任意有效按鍵名轉換為 kebab-case 來作為修飾符。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> @<span class="hljs-attr">keyup.page-down</span>=<span class="hljs-string">&quot;onPageDown&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>只會在 <code>$event.key</code> 等於 <code>PageDown</code> 時被調用。</p><h4 id="按鍵別名">按鍵別名</h4><p>Vue 為最常用的鍵提供了別名：</p><ul><li><code>.enter</code></li><li><code>.tab</code></li><li><code>.delete</code> (捕獲 “刪除” 和 “退格” 鍵)</li><li><code>.esc</code></li><li><code>.space</code></li><li><code>.up</code></li><li><code>.down</code></li><li><code>.left</code></li><li><code>.right</code></li></ul><h3 id="系統修飾鍵">系統修飾鍵</h3><p>可以用如下修飾符來實現僅在 <code>按下相應按鍵時</code> 才觸發滑鼠或鍵盤事件的監聽器。</p><ul><li><code>.ctrl</code></li><li><code>.alt</code></li><li><code>.shift</code></li><li><code>.meta</code></li></ul><blockquote><p>meta 在 Mac 系統鍵盤上， 對應 command 鍵 (⌘)。在 Windows 系統上對應 Windows 鍵 (⊞)。</p></blockquote><p>例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- Alt + Enter --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> @<span class="hljs-attr">keyup.alt.enter</span>=<span class="hljs-string">&quot;clear&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- Ctrl + Click --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> @<span class="hljs-attr">click.ctrl</span>=<span class="hljs-string">&quot;doSomething&quot;</span>&gt;</span>Do something<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>修飾鍵與常規按鍵不同，<code>在和 keyup 事件一起用時，事件觸發時修飾鍵必須處於按下狀態</code>。<br>換句話說，只有在按住 ctrl 的情況下釋放其它按鍵，才能觸發 keyup.ctrl。<br>而單單釋放 ctrl 也不會觸發事件。</p></blockquote><h4 id="exact-修飾符">.exact 修飾符</h4><p><code>.exact</code> 修飾符允許你控制由精確的系統修飾符組合觸發的事件。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 即使 Alt 或 Shift 被一同按下時也會觸發 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.ctrl</span>=<span class="hljs-string">&quot;onClick&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 有且只有 Ctrl 被按下的時候才觸發 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.ctrl.exact</span>=<span class="hljs-string">&quot;onCtrlClick&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 沒有任何系統修飾符被按下的時候才觸發 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.exact</span>=<span class="hljs-string">&quot;onClick&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="滑鼠按鍵修飾符">滑鼠按鍵修飾符</h4><ul><li><code>.left</code></li><li><code>.right</code></li><li><code>.middle</code></li></ul><p>這些修飾符會限制處理函式僅響應特定的滑鼠按鍵。</p><h4 id="為什麼在-HTML-中監聽事件？">為什麼在 HTML 中監聽事件？</h4><p>Vue 這種事件監聽的方式違背了 關注點分離 (separation of concern) 這個長期以來的優良傳統。<br>但不必擔心，因為所有的 Vue 事件處理方法和表達式都嚴格綁定在當前視圖的 ViewModel 上，它不會導致任何維護上的困難。實際上，使用 <code>v-on</code> 或 <code>@</code> 有幾個好處：</p><ol><li><p>掃一眼 HTML 模板便能輕鬆定位在 JavaScript 裡對應的方法。</p></li><li><p>因為你無須在 JavaScript 裡手動綁定事件，你的 ViewModel 程式碼可以是非常純粹的邏輯，和 DOM 完全分開，更易於測試。</p></li><li><p>當一個 ViewModel 被銷毀時，所有的事件處理器都會自動被刪除。你無須擔心如何清理它們。</p></li></ol><h2 id="表單輸入綁定">表單輸入綁定</h2><h3 id="基礎用法">基礎用法</h3><p>你可以用 <code>v-model</code> 指令在表單 <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code> 及 <code>&lt;select&gt;</code> 元素上創建雙向數據綁定。<br>它會根據控件類型自動選取正確的方法來更新元素。<code>v-model</code> 本質上只不過是語法糖。<br>它負責監聽用戶的輸入事件來更新數據，並在某種極端場景下進行一些特殊處理。</p><blockquote><p><code>v-model</code> 會忽略所有表單元素的 value、checked、selectedattribute 的初始值而總是將當前活動實例的數據作為數據來源。你應該通過 JavaScript 在組件的 data 選項中聲明初始值。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;inputValue&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>輸入內容：&#123;&#123; inputValue &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    inputValue: <span class="hljs-string">&#x27;初始值&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>v-model</code> 在內部為不同的輸入元素使用不同的 property 並拋出不同的事件：</p><ul><li><code>text</code> 和 <code>textarea</code> 元素使用 <code>value</code> property 和 <code>input</code> 事件</li><li><code>checkbox</code> 和 <code>radio</code> 使用 <code>checked</code> property 和 <code>change</code> 事件</li><li><code>select</code> 字段將 <code>value</code> 作為 prop 並將 <code>change</code> 作為事件</li></ul><blockquote><p>對於需要使用輸入法組織文字過程中得到更新，<br>應該要使用 <code>v-on</code> 與 <code>input</code> 事件綁定，而不是 <code>v-model</code>。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;handelInput&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>輸入內容：&#123;&#123; inputValue &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    inputValue: <span class="hljs-string">&#x27;&#x27;</span><br>  &#125;<br>&#125;,<br>methods: &#123;<br>  handelInput(event) &#123;<br>    <span class="hljs-built_in">this</span>.inputValue = event.target.value<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="文本（Text）">文本（Text）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;msg&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;編輯我&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>雙向綁定：&#123;&#123; msg &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    msg: <span class="hljs-string">&#x27;&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="多行文本（Textarea）">多行文本（Textarea）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;msg&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;編輯我&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br><span class="hljs-comment">&lt;!-- white-space: pre-line; 支援換行符 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;white-space: pre-line;&quot;</span>&gt;</span>雙向綁定：&#123;&#123; msg &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    msg: <span class="hljs-string">&#x27;&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="複選框（Checkbox）">複選框（Checkbox）</h4><p>單個複選框，綁定布林值：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;checked&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>checkbox: &#123;&#123; checked &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    chekced: <span class="hljs-literal">false</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>多個複選框，綁定 <code>value</code> 至陣列：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pekora&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Pekroa&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;checkArray&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sakuraMiko&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;SakuraMiko&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;checkArray&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    checkArray: [],<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="單選框（Radio）">單選框（Radio）</h4><p>綁定單選框的 <code>value</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;first&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;第一個&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;picked&quot;</span>&gt;</span> 第一個<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;second&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;第二個&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;picked&quot;</span>&gt;</span> 第二個<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    picked: <span class="hljs-string">&#x27;第一個&#x27;</span> <span class="hljs-comment">// 初始值</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="選擇框（Select）">選擇框（Select）</h4><blockquote><p>綁定單個 select 裡的 option 的 <code>value</code>：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;selected&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">disabled</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;none&quot;</span>&gt;</span>請選擇其中一個<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;A&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;B&quot;</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;C&quot;</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>已選擇: &#123;&#123; selected &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    selected: <span class="hljs-string">&#x27;none&#x27;</span> <span class="hljs-comment">// 初始值</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>綁定多個 select 裡的 option 的 <code>value</code>：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;selected&quot;</span> <span class="hljs-attr">multiple</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;A&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;B&quot;</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;C&quot;</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>已選擇: &#123;&#123; selected &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">...<br>data() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    selected: [],<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="值綁定">值綁定</h3><h3 id="修飾符-2">修飾符</h3><h4 id="lazy">.lazy</h4><p>默認 <code>v-model</code> 在每次 <code>input</code> 事件後將輸入框的值與數據進行同步，<br>若添加了 <code>.lazy</code> 修飾符，而改為在 <code>change</code> 事件之後進行同步：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 在 change 時同步 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.lazy</span>=<span class="hljs-string">&quot;msg&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h4 id="number">.number</h4><p>HTML 輸入元素的值總是返回字符串，<br>如果想自動將用戶的輸入值轉為數值類型，可以添加 <code>.number</code> 修飾符：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;msg&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>如果這個值無法被 <code>parseFloat</code> 解析，則會返回原始值。</p><h4 id="trim">.trim</h4><p>這個修飾符和 <code>String.prototype.trim()</code> 的作用一樣，<br>可以將字符串首尾的空格移除。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.trim</span>=<span class="hljs-string">&quot;msg&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h2 id="組件基礎">組件基礎</h2><h3 id="基本">基本</h3><p>這是一個 <code>註冊全局組件</code> 的示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;&#125;)<br><br><span class="hljs-comment">// 定義一個名為 button-counter 的新全局組件</span><br>app.component(<span class="hljs-string">&#x27;button-counter&#x27;</span>, &#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      count: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;,<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;button @click=&quot;count++&quot;&gt;</span><br><span class="hljs-string">      You clicked me &#123;&#123; count &#125;&#125; times.</span><br><span class="hljs-string">    &lt;/button&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>組件是帶有名稱的可複用實例，可以把這個組件作為一個根實例中的自定義元素來使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;components-demo&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button-counter</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button-counter</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.mount(<span class="hljs-string">&#x27;#components-demo&#x27;</span>)<br></code></pre></td></tr></table></figure><p>因為組件是可複用的組件實例，所以它們與根實例接收相同的選項，例如 <code>data</code>、<code>computed</code>、<code>watch</code>、<code>methods</code> 以及生命週期鉤子等。</p><h3 id="組件複用">組件複用</h3><p>組件可以進行任意次數的複用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;components-demo&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button-counter</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button-counter</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button-counter</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button-counter</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button-counter</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button-counter</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>當點擊按鈕時，每個組件都會各自獨立維護它的 <code>count</code>。<br>因為每用一次組件，就會有一個它的新實例被創建。</p><h3 id="組件的組織">組件的組織</h3><p>通常一個應用會以一棵嵌套的組件樹的形式來組織：</p><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/posts/677b/components.png" alt="Vue3生命週期圖"></p><p>例如，你可能會有頁頭、側邊欄、內容區等組件，每個組件又包含了其它的像導航鏈接、博文之類的組件。</p><p>為了能在模板中使用，這些組件必須先註冊以便 Vue 能夠識別。<br>有兩種組件的註冊類型：全局註冊和局部註冊。<br>至此，我們的組件都只是通過 <code>component</code> 方法全局註冊的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;&#125;)<br><br>app.component(<span class="hljs-string">&#x27;my-component-name&#x27;</span>, &#123;<br>  <span class="hljs-comment">// ... 選項 ...</span><br>&#125;)<br></code></pre></td></tr></table></figure><blockquote><p>全局註冊的組件可以在應用中的任何組件的模板中使用。</p></blockquote><h3 id="透過-Prop-向子組件傳遞數據">透過 Prop 向子組件傳遞數據</h3><p>在很多情況下會需要向子組件傳遞數據，比如：子組件是一個文章組件，<br>該組件有標題、簡介、預覽圖，這些數據是不能寫死的，<br>這時就需要傳遞數據，這就是 prop 的用處。</p><p>Prop 可以讓你在組件上註冊一些自定義 attribute。<br>為了給文章組件傳遞一個標題，可以用 <code>props</code> 選項將其包含在該組件可接受的 prop 陣列中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;&#125;)<br><br>app.component(<span class="hljs-string">&#x27;blog-post&#x27;</span>, &#123;<br>  <span class="hljs-comment">// 此子組件可以傳遞 title 這個自定義的 attribute</span><br>  props: [<span class="hljs-string">&#x27;title&#x27;</span>],<br>  <span class="hljs-comment">// 該值可以直接在模板中訪問</span><br>  template: <span class="hljs-string">`&lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;`</span><br>&#125;)<br><br>app.mount(<span class="hljs-string">&#x27;#blog-post-demo&#x27;</span>)<br></code></pre></td></tr></table></figure><p>當一個值被傳遞給一個 prop attribute 時，它就成為該組件實例中的一個 property。<br>該 property 的值可以在模板中訪問，就像任何其他組件 property 一樣。</p><p>一個組件默認可以擁有任意數量的 prop，無論任何值都可以傳遞給 prop。</p><p>在一個典型的應用中，你可能在 data 裡有一個文章的陣列：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> App = &#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      posts: [<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;My journey with Vue&#x27;</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Blogging with Vue&#x27;</span> &#125;,<br>        &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Why Vue is so fun&#x27;</span> &#125;<br>      ]<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> app = Vue.createApp(App)<br><br>app.component(<span class="hljs-string">&#x27;blog-post&#x27;</span>, &#123;<br>  props: [<span class="hljs-string">&#x27;title&#x27;</span>],<br>  template: <span class="hljs-string">`&lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;`</span><br>&#125;)<br><br>app.mount(<span class="hljs-string">&#x27;#blog-posts-demo&#x27;</span>)<br></code></pre></td></tr></table></figure><p>為每篇文章渲染標題：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;blog-posts-demo&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">blog-post</span></span><br><span class="hljs-tag">    <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;post in posts&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;post.id&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;post.title&quot;</span></span><br><span class="hljs-tag">  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="監聽子組件事件">監聽子組件事件</h3><p>在某些情況下會需要子組件與父級組件溝通。</p><p>例如在剛剛的案例引入 調整文章標題字體大小 的輔助功能。</p><p>首先，在父級組件添加一個 <code>postFontSize</code> 數據 property：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> App = &#123;<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      posts: [<br>        <span class="hljs-comment">/* ... */</span><br>      ],<br>      postFontSize: <span class="hljs-number">1</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>並在模板中使用該數據：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;blog-posts-demo&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; fontSize: postFontSize + &#x27;em&#x27; &#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">blog-post</span></span><br><span class="hljs-tag">      <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;post in posts&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;post.id&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;post.title&quot;</span></span><br><span class="hljs-tag">    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>接著到子組件添加一個按鈕：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">app.component(<span class="hljs-string">&#x27;blog-post&#x27;</span>, &#123;<br>  props: [<span class="hljs-string">&#x27;title&#x27;</span>],<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;div class=&quot;blog-post&quot;&gt;</span><br><span class="hljs-string">      &lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;</span><br><span class="hljs-string">      &lt;button&gt;</span><br><span class="hljs-string">        放大文字</span><br><span class="hljs-string">      &lt;/button&gt;</span><br><span class="hljs-string">    &lt;/div&gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>外觀有了，但目前這個按鈕是沒有任何作用的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span><br>  放大文字<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可以先分析這個按鈕需要做到什麼事：<br>（必須要分清楚是哪個組件做哪些事）</p><ol><li>點擊事件（子組件）</li><li>處理邏輯（父組件）</li></ol><p>所以子組件的模板按鈕大概可這樣寫</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;...&quot;</span>&gt;</span><br>  放大文字<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>問題是，要怎麼在父組件監聽子組件的事件呢（怎麼知道子組件觸發了事件）？</p><p>組件實例提供了自定義事件的系統來解決這個問題。<br>父級組件可以像處理原生 DOM 事件一樣通過 <code>v-on</code> 或 <code>@</code> 監聽子組件實例的任意事件：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">blog-post</span></span><br><span class="hljs-tag">  <span class="hljs-attr">...</span></span><br><span class="hljs-tag">  @<span class="hljs-attr">enlarge-text</span>=<span class="hljs-string">&quot;postFontSize += 0.1&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post</span>&gt;</span><br></code></pre></td></tr></table></figure><p>同時，子組件可以透過內建的 <code>$emit</code> 方法傳入事件名來<code>觸發一個事件</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$emit(&#x27;enlarge-text&#x27;)&quot;</span>&gt;</span><br>  放大文字<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>整理以上的 <code>$emit</code>，流程會變成這樣：</p><ol><li>點擊事件，並觸發父組件的自定義事件（子組件）</li><li>監聽自定義事件，並處理邏輯（父組件）</li></ol><p>可以在 <code>emits</code> 選項列出已拋出的事件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">app.component(<span class="hljs-string">&#x27;blog-post&#x27;</span>, &#123;<br>  props: [<span class="hljs-string">&#x27;title&#x27;</span>],<br>  emits: [<span class="hljs-string">&#x27;enlargeText&#x27;</span>],<br>  ...<br>&#125;)<br></code></pre></td></tr></table></figure><p>這可以更方便的了解組件拋出的所有事件，還可選擇驗證它們。</p><h4 id="拋出一個值">拋出一個值</h4><p>可以使用 <code>$emit</code> 方法的第二個參數來拋出值：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$emit(&#x27;enlarge-text&#x27;, 0.1)&quot;</span>&gt;</span><br>  放大文字<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可以在父組件使用 <code>$event</code> 訪問拋出的值：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">blog-post</span></span><br><span class="hljs-tag">  <span class="hljs-attr">...</span></span><br><span class="hljs-tag">  @<span class="hljs-attr">enlarge-text</span>=<span class="hljs-string">&quot;postFontSize += $event&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果事件處理是個方法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">blog-post</span></span><br><span class="hljs-tag">  <span class="hljs-attr">...</span></span><br><span class="hljs-tag">  @<span class="hljs-attr">enlarge-text</span>=<span class="hljs-string">&quot;onEnlargeText&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post</span>&gt;</span><br></code></pre></td></tr></table></figure><p>該值會做為方法的第一個值傳入：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">methods: &#123;<br>  onEnlargeText(enlargeAmount) &#123;<br>    <span class="hljs-built_in">this</span>.postFontSize += enlargeAmount<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="支援組件-v-model">支援組件 v-model</h4><p>定義事件也可以用於創建支持 <code>v-model</code> 的 <code>自定義輸入組件</code>。</p><blockquote><p>記住以下邏輯</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;searchText&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- 等同於 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;searchText&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;searchText = $event.target.value&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>在組件上時：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">custom-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;searchText&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- 等同於 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">custom-input</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:model-value</span>=<span class="hljs-string">&quot;searchText&quot;</span></span><br><span class="hljs-tag">  @<span class="hljs-attr">update:model-value</span>=<span class="hljs-string">&quot;searchText = $event&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">custom-input</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可以發現組件用 <code>model-value</code> prop 傳遞了 <code>searchText</code> property，<br>並監聽了自定義事件 <code>update:model-value</code>，處理邏輯也使用到了 <code>$event</code>。</p><p>所以在組件在使用 v-model 必須滿足以下條件才能正常使用。</p><ul><li>將 <code>value</code> attribute 綁定到一個名為 <code>model-value</code> 的 prop。</li><li>在 <code>input</code> 事件觸發時，使用 <code>$emit</code> 觸發 <code>update:model-value</code> 自定義事件，並拋出值。</li></ul><p>實現後大概長這個樣子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">app.component(<span class="hljs-string">&#x27;custom-input&#x27;</span>, &#123;<br>  props: [<span class="hljs-string">&#x27;modelValue&#x27;</span>],<br>  emits: [<span class="hljs-string">&#x27;update:modelValue&#x27;</span>],<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;input</span><br><span class="hljs-string">      :value=&quot;modelValue&quot;</span><br><span class="hljs-string">      @input=&quot;$emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span><br><span class="hljs-string">    /&gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>現在 <code>v-model</code> 就可以正長使用了：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">custom-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;searchText&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>在該組件中實現 <code>v-model</code> 的另一種方法是使用 <code>computed</code> property 的功能來定義 <code>getter</code> 和 <code>setter</code>。<br>get 方法應返回 <code>model-value</code> property，set 方法應該觸發相應的事件。</p><p>因為：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;value&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- 等同於 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;value&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;value = $event.target.value&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>所以：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js">app.component(<span class="hljs-string">&#x27;custom-input&#x27;</span>, &#123;<br>  props: [<span class="hljs-string">&#x27;modelValue&#x27;</span>],<br>  emits: [<span class="hljs-string">&#x27;update:modelValue&#x27;</span>],<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;input v-model=&quot;value&quot;&gt;</span><br><span class="hljs-string">  `</span>,<br>  computed: &#123;<br>    <span class="hljs-comment">// 注意這個計算屬性的名稱</span><br>    value: &#123;<br>      get() &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * :value=&quot;value&quot;</span><br><span class="hljs-comment">         *    綁定的 value 會從 modelValue prop 取值。</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.modelValue<br>      &#125;,<br>      set(value) &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * <span class="hljs-doctag">@input</span>=&quot;value = $event.target.value&quot;</span><br><span class="hljs-comment">         *    當 value = $event.target.value 時，</span><br><span class="hljs-comment">         *    新的 value 會成為這個 setter 的 參數（value），</span><br><span class="hljs-comment">         *    接著調用內置方法 this.$emit() 觸發自定義事件和值。</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;update:modelValue&#x27;</span>, value)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="插槽分發內容">插槽分發內容</h3><p>和 HTML 元素一樣，我們經常需要向一個組件傳遞內容，像這樣：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">alert-box</span>&gt;</span><br>  好像發生了什麼意外。<br><span class="hljs-tag">&lt;/<span class="hljs-name">alert-box</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可以透過 Vue 自定義的 <code>&lt;slot&gt;</code> 元素來實現：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">app.component(<span class="hljs-string">&#x27;alert-box&#x27;</span>, &#123;<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;div class=&quot;demo-alert-box&quot;&gt;</span><br><span class="hljs-string">      &lt;strong&gt;錯誤！&lt;/strong&gt;</span><br><span class="hljs-string">      &lt;slot&gt;&lt;/slot&gt;</span><br><span class="hljs-string">    &lt;/div&gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>輸出得結果長這樣：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo-alert-box&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>錯誤！<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>  好像發生了什麼意外。<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>總結 <code>&lt;slot&gt;</code> 大致上就是做為內容佔位符。</p><h3 id="動態組件">動態組件</h3><p>有的時候，在不同組件之間進行動態切換是非常有用的，比如在一個多標籤的界面裡。</p><p>上述內容可以通過 Vue 的 <code>&lt;component&gt;</code> 元素加一個特殊的 <code>is</code> attribute 來實現：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 此組件會在 `currentTabComponent` 改變時改變 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;currentTabComponent&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>currentTabComponent</code> 可以包括：</p><ul><li>已註冊組件的名字（ <a target="_blank" rel="noopener" href="https://codepen.io/team/Vue/pen/oNXaoKy">案例</a> ）</li><li>一個組件的選項物件（ <a target="_blank" rel="noopener" href="https://codepen.io/team/Vue/pen/oNXapXM">案例</a> ）</li></ul><h3 id="解析-DOM-模板的注意事項">解析 DOM 模板的注意事項</h3><p>有些 HTML 元素，例如 <code>&lt;ul&gt;</code>、<code>&lt;ol&gt;</code>、<code>&lt;table&gt;</code> 和 <code>&lt;select&gt;</code>，對於哪些元素可以出現在其內部是有嚴格限制的。<br>而有些元素，例如 <code>&lt;li&gt;</code>、<code>&lt;tr&gt;</code> 和 <code>&lt;option&gt;</code>，只能出現在其它某些特定的元素內部。</p><p>這會導致我們使用這些有約束條件的元素時遇到一些問題。例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">blog-post-row</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post-row</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><p>這個自定義組件 <code>&lt;blog-post-row&gt;</code> 會被作為無效的內容提升到外部，並導致最終渲染結果出錯。我們可以使用特殊的 <code>v-is</code> 指令作為一個變通的辦法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-is</span>=<span class="hljs-string">&quot;&#x27;blog-post-row&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>v-is</code> 值應為 JavaScript 字符串：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 錯誤的，這樣不會渲染任何東西 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-is</span>=<span class="hljs-string">&quot;blog-post-row&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 正確的 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-is</span>=<span class="hljs-string">&quot;&#x27;blog-post-row&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br></code></pre></td></tr></table></figure><p>另外，HTML attribute 名不區分大小寫，因此瀏覽器將所有大寫字符解釋為小寫。<br>這意味著當你在 DOM 模板中使用時，駝峰 prop 名稱和 event 處理器參數需要使用它們的 kebab-cased (橫線字符分隔) 等效值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//  在 JavaScript 中的駝峰</span><br><br>app.component(<span class="hljs-string">&#x27;blog-post&#x27;</span>, &#123;<br>  props: [<span class="hljs-string">&#x27;postTitle&#x27;</span>],<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3&gt;&#123;&#123; postTitle &#125;&#125;&lt;/h3&gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 在 HTML 則是橫線字符分割 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">blog-post</span> <span class="hljs-attr">post-title</span>=<span class="hljs-string">&quot;hello!&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blog-post</span>&gt;</span><br></code></pre></td></tr></table></figure><p>需要注意的是如果從以下來源使用模板的話，這條限制是不存在的：</p><ul><li>字符串模板 (例如：template: ‘…’)</li><li>單文件組件</li><li><code>&lt;script type=&quot;text/x-template&quot;&gt;</code></li></ul><h3 id="在組件上使用-class-綁定">在組件上使用 class 綁定</h3><p>在現有單個根元素的自定義組件上使用 <code>class</code> attribute 時，這些 class 將被添加到該元素中。<br>此元素上現有的 class 將不會被覆蓋：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;&#125;)<br><br>app.component(<span class="hljs-string">&#x27;my-component&#x27;</span>, &#123;<br>  template: <span class="hljs-string">`&lt;p class=&quot;foo bar&quot;&gt;Hi!&lt;/p&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">my-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;baz boo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-component</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>渲染結果為：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foo bar baz boo&quot;</span>&gt;</span>Hi<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>帶數據綁定 class 也適用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">my-component</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; active: isActive &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-component</span>&gt;</span><br></code></pre></td></tr></table></figure><p>當　<code>isActive</code> 為 truthy 時，渲染結果為：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foo bar active&quot;</span>&gt;</span>Hi<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果該組件有多個根元素，需要定義哪些部分接收這個 class。<br>可以使用 <code>$attr</code> 組件屬性執行此操作：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">my-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;baz&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-component</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> app = Vue.createApp(&#123;&#125;)<br><br>app.component(<span class="hljs-string">&#x27;my-component&#x27;</span>, &#123;<br>  template: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;p :class=&quot;$attrs.class&quot;&gt;Hi!&lt;/p&gt;</span><br><span class="hljs-string">    &lt;span&gt;This is a child component&lt;/span&gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="在組件上使用-v-for">在組件上使用 v-for</h3><p>在自定義組件上，可以像在任何普通元素上一樣使用 <code>v-for</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">my-component</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-component</span>&gt;</span><br></code></pre></td></tr></table></figure><p>任何數據都不會被自動傳遞到組件裡，因為組件有自己獨立的作用域。<br>為了把迭代數據傳遞到組件裡，需要使用 props：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">my-component</span></span><br><span class="hljs-tag">  <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, index) in items&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:item</span>=<span class="hljs-string">&quot;item&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;index&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-component</span>&gt;</span><br></code></pre></td></tr></table></figure><p>不自動將 <code>item</code> 注入到組件裡的原因是，這會使得組件與 <code>v-for</code> 的運作緊密耦合。<br>明確組件數據的來源能夠使組件在其他場合重複使用。</p><p><a target="_blank" rel="noopener" href="https://codepen.io/team/Vue/pen/abOaWpz">todo 列表案例</a></p><hr><p>封面來源 ：</p><ul><li><a target="_blank" rel="noopener" href="https://www.pixiv.net/artworks/87658338">yenkoes - にゃんるし</a></li></ul></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">NekoChan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章連結:</span> <span class="post-copyright-info"><a href="https://nekochan.vercel.app/posts/677b/">https://nekochan.vercel.app/posts/677b/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版權聲明:</span> <span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 許可協議。轉載請註明來自 <a href="https://nekochan.vercel.app" target="_blank">NekoChan</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue3/">Vue3</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/8933/"><img class="next-cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/posts/8933/cover.webp" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">重新認識 CSS</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>評論</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%87%89%E7%94%A8-%E7%B5%84%E4%BB%B6%E5%AF%A6%E4%BE%8B"><span class="toc-text">應用 &amp; 組件實例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%87%89%E7%94%A8%E5%AF%A6%E4%BE%8B"><span class="toc-text">應用實例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E7%B5%84%E4%BB%B6"><span class="toc-text">根組件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B5%84%E4%BB%B6%E5%AF%A6%E4%BE%8B-property"><span class="toc-text">組件實例 property</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F%E9%89%A4%E5%AD%90"><span class="toc-text">生命週期鉤子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F%E5%9C%96"><span class="toc-text">生命週期圖</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E8%AA%9E%E6%B3%95"><span class="toc-text">模板語法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%80%BC"><span class="toc-text">插值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%9C%AC"><span class="toc-text">文本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B-HTML"><span class="toc-text">原始 HTML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Attribute"><span class="toc-text">Attribute</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-%E8%A1%A8%E9%81%94%E5%BC%8F"><span class="toc-text">JavaScript 表達式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%83%E6%95%B8"><span class="toc-text">參數</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8B%95%E6%85%8B%E5%8F%83%E6%95%B8"><span class="toc-text">動態參數</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E9%A3%BE%E7%AC%A6"><span class="toc-text">修飾符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B8%AE%E5%AF%AB"><span class="toc-text">縮寫</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#v-bind-%E7%B8%AE%E5%AF%AB"><span class="toc-text">v-bind 縮寫</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#v-on-%E7%B8%AE%E5%AF%AB"><span class="toc-text">v-on 縮寫</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85"><span class="toc-text">注意事項</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8B%95%E6%85%8B%E5%8F%83%E6%95%B8%E7%9A%84%E8%A6%8F%E5%AE%9A"><span class="toc-text">動態參數的規定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8D%E5%8B%95%E6%85%8B%E5%8F%83%E6%95%B8%E8%A1%A8%E9%81%94%E6%98%AF%E7%9A%84%E8%A6%8F%E5%AE%9A"><span class="toc-text">對動態參數表達是的規定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-%E8%A1%A8%E9%81%94%E5%BC%8F-2"><span class="toc-text">JavaScript 表達式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-Property-%E5%92%8C-%E6%96%B9%E6%B3%95"><span class="toc-text">Data Property 和 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-Property"><span class="toc-text">Data Property</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-text">方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E8%88%87%E7%AF%80%E6%B5%81"><span class="toc-text">防抖與節流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A8%88%E7%AE%97%E5%B1%AC%E6%80%A7-%E5%92%8C-%E7%9B%A3%E8%81%BD%E5%99%A8"><span class="toc-text">計算屬性 和 監聽器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A8%88%E7%AE%97%E5%B1%AC%E6%80%A7"><span class="toc-text">計算屬性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-text">例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A8%88%E7%AE%97%E5%B1%AC%E6%80%A7%E7%B7%A9%E5%AD%98-vs-%E6%96%B9%E6%B3%95"><span class="toc-text">計算屬性緩存 vs 方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A8%88%E7%AE%97%E5%B1%AC%E6%80%A7%E7%9A%84-Setter"><span class="toc-text">計算屬性的 Setter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%A3%E8%81%BD%E5%99%A8"><span class="toc-text">監聽器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A8%88%E7%AE%97%E5%B1%AC%E6%80%A7-vs-%E7%9B%A3%E8%81%BD%E5%99%A8"><span class="toc-text">計算屬性 vs 監聽器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Class-%E8%88%87-Style-%E7%B6%81%E5%AE%9A"><span class="toc-text">Class 與 Style 綁定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B6%81%E5%AE%9A-HTML-Class"><span class="toc-text">綁定 HTML Class</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E4%BB%B6%E8%AA%9E%E6%B3%95"><span class="toc-text">物件語法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%A3%E5%88%97%E8%AA%9E%E6%B3%95"><span class="toc-text">陣列語法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B6%81%E5%AE%9A%E5%85%A7%E8%81%AF%E6%A8%A3%E5%BC%8F"><span class="toc-text">綁定內聯樣式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E4%BB%B6%E8%AA%9E%E6%B3%95-2"><span class="toc-text">物件語法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%A3%E5%88%97%E8%AA%9E%E6%B3%95-2"><span class="toc-text">陣列語法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8B%95%E6%B7%BB%E5%8A%A0%E5%89%8D%E9%A4%9F"><span class="toc-text">自動添加前餟</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E5%80%BC"><span class="toc-text">多重值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A2%9D%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">條件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if"><span class="toc-text">v-if</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#template-%E5%85%83%E7%B4%A0"><span class="toc-text">&lt;template&gt; 元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#v-else"><span class="toc-text">v-else</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#v-else-if"><span class="toc-text">v-else-if</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-show"><span class="toc-text">v-show</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if-vs-v-show"><span class="toc-text">v-if vs v-show</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">列表渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-for-%E9%99%A3%E5%88%97"><span class="toc-text">v-for 陣列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-for-%E7%89%A9%E4%BB%B6"><span class="toc-text">v-for 物件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B6%AD%E8%AD%B7%E7%8B%80%E6%85%8B"><span class="toc-text">維護狀態</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%A3%E5%88%97%E6%9B%B4%E6%96%B0%E6%AA%A2%E6%B8%AC"><span class="toc-text">陣列更新檢測</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%8A%E6%9B%B4%E6%96%B9%E6%B3%95"><span class="toc-text">變更方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8F%9B%E9%99%A3%E5%88%97"><span class="toc-text">替換陣列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%AF%E7%A4%BA%E9%81%8E%E6%BF%BE-%E6%8E%92%E5%BA%8F%E5%BE%8C%E7%9A%84%E7%B5%90%E6%9E%9C"><span class="toc-text">顯示過濾 &#x2F; 排序後的結果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-v-for-%E8%A3%A1%E4%BD%BF%E7%94%A8%E5%80%BC%E7%9A%84%E7%AF%84%E5%9C%8D"><span class="toc-text">在 v-for 裡使用值的範圍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-template-%E4%B8%AD%E4%BD%BF%E7%94%A8-v-for"><span class="toc-text">在 &lt;template&gt; 中使用 v-for</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#v-for-%E8%88%87-v-if-%E4%B8%80%E5%90%8C%E4%BD%BF%E7%94%A8"><span class="toc-text">v-for 與 v-if 一同使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E8%99%95%E7%90%86"><span class="toc-text">事件處理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E8%99%95%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-text">事件處理方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A7%E8%81%AF%E8%99%95%E7%90%86%E5%99%A8%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">內聯處理器中的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%BA%8B%E4%BB%B6%E8%99%95%E7%90%86%E5%99%A8"><span class="toc-text">多事件處理器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A3%BE%E7%AC%A6"><span class="toc-text">事件修飾符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E9%8D%B5%E4%BF%AE%E9%A3%BE%E7%AC%A6"><span class="toc-text">按鍵修飾符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%8D%B5%E5%88%A5%E5%90%8D"><span class="toc-text">按鍵別名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%B5%B1%E4%BF%AE%E9%A3%BE%E9%8D%B5"><span class="toc-text">系統修飾鍵</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#exact-%E4%BF%AE%E9%A3%BE%E7%AC%A6"><span class="toc-text">.exact 修飾符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%91%E9%BC%A0%E6%8C%89%E9%8D%B5%E4%BF%AE%E9%A3%BE%E7%AC%A6"><span class="toc-text">滑鼠按鍵修飾符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%82%BA%E4%BB%80%E9%BA%BC%E5%9C%A8-HTML-%E4%B8%AD%E7%9B%A3%E8%81%BD%E4%BA%8B%E4%BB%B6%EF%BC%9F"><span class="toc-text">為什麼在 HTML 中監聽事件？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%96%AE%E8%BC%B8%E5%85%A5%E7%B6%81%E5%AE%9A"><span class="toc-text">表單輸入綁定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A4%8E%E7%94%A8%E6%B3%95"><span class="toc-text">基礎用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%EF%BC%88Text%EF%BC%89"><span class="toc-text">文本（Text）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E6%96%87%E6%9C%AC%EF%BC%88Textarea%EF%BC%89"><span class="toc-text">多行文本（Textarea）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A4%87%E9%81%B8%E6%A1%86%EF%BC%88Checkbox%EF%BC%89"><span class="toc-text">複選框（Checkbox）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%96%AE%E9%81%B8%E6%A1%86%EF%BC%88Radio%EF%BC%89"><span class="toc-text">單選框（Radio）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%B8%E6%93%87%E6%A1%86%EF%BC%88Select%EF%BC%89"><span class="toc-text">選擇框（Select）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC%E7%B6%81%E5%AE%9A"><span class="toc-text">值綁定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E9%A3%BE%E7%AC%A6-2"><span class="toc-text">修飾符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#lazy"><span class="toc-text">.lazy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#number"><span class="toc-text">.number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#trim"><span class="toc-text">.trim</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%84%E4%BB%B6%E5%9F%BA%E7%A4%8E"><span class="toc-text">組件基礎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC"><span class="toc-text">基本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B5%84%E4%BB%B6%E8%A4%87%E7%94%A8"><span class="toc-text">組件複用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B5%84%E4%BB%B6%E7%9A%84%E7%B5%84%E7%B9%94"><span class="toc-text">組件的組織</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%8F%E9%81%8E-Prop-%E5%90%91%E5%AD%90%E7%B5%84%E4%BB%B6%E5%82%B3%E9%81%9E%E6%95%B8%E6%93%9A"><span class="toc-text">透過 Prop 向子組件傳遞數據</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%A3%E8%81%BD%E5%AD%90%E7%B5%84%E4%BB%B6%E4%BA%8B%E4%BB%B6"><span class="toc-text">監聽子組件事件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%8B%E5%87%BA%E4%B8%80%E5%80%8B%E5%80%BC"><span class="toc-text">拋出一個值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%AF%E6%8F%B4%E7%B5%84%E4%BB%B6-v-model"><span class="toc-text">支援組件 v-model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD%E5%88%86%E7%99%BC%E5%85%A7%E5%AE%B9"><span class="toc-text">插槽分發內容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8B%95%E6%85%8B%E7%B5%84%E4%BB%B6"><span class="toc-text">動態組件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90-DOM-%E6%A8%A1%E6%9D%BF%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85"><span class="toc-text">解析 DOM 模板的注意事項</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%B5%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-class-%E7%B6%81%E5%AE%9A"><span class="toc-text">在組件上使用 class 綁定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%B5%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-v-for"><span class="toc-text">在組件上使用 v-for</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By NekoChan</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Nyahello!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字型"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="縮小字型"><i class="fas fa-minus"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直達評論"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜尋</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜尋文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/js/utils.js"></script><script src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script defer src="https://cdn.jsdelivr.net/gh/NekoChanTaiwan/blog@gh-pages/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>function loadValine(){function e(){new Valine(Object.assign({el:"#vcomment",appId:"w7ldQtxf9N31hChwQ7gImXML-MdYXbMMI",appKey:"8gKzrbCn2S4nvrSa7VArrpSY",placeholder:"留下你的足跡",avatar:"",meta:"nick,mail,link".split(","),pageSize:"10",lang:"zh-TW",recordIP:!1,serverURLs:"",emojiCDN:"",emojiMaps:"",enableQQ:!1,path:window.location.pathname,requiredFields:["nick,mail"],visitor:!1},null))}"function"==typeof Valine?e():getScript("https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js").then(e)}{function loadOtherComment(){loadValine()}btf.loadComment(document.getElementById("vcomment"),loadValine)}</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener("load",()=>{const e=(e,t)=>{if(e)return e;return"https://gravatar.loli.net/avatar/"+(md5(t.toLowerCase())+"")},t=e=>{let t="";if(e.length)for(let a=0;a<e.length;a++){t+="<div class='aside-list-item'>";{const n="data-lazy-src";t+=`<a href='${e[a].url}' class='thumbnail'><img ${n}='${e[a].avatar}' alt='${e[a].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[a].url}'>${e[a].content}</a>\n        <div class='name'><span>${e[a].nick} / </span><time datetime="${e[a].date}">${btf.diffDate(e[a].date,!0)}</time></div>\n        </div></div>`}else t+="沒有評論";let a=document.querySelector("#card-newest-comments .aside-list");a.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(a)},a=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const a=saveToLocal.get("valine-newest-comments");a?t(JSON.parse(a)):fetch("https://w7ldQtxf.api.lncldglobal.com/1.1/classes/Comment?limit=6&order=-createdAt",{method:"GET",headers:{"X-LC-Id":"w7ldQtxf9N31hChwQ7gImXML-MdYXbMMI","X-LC-Key":"8gKzrbCn2S4nvrSa7VArrpSY","Content-Type":"application/json"}}).then(e=>e.json()).then(a=>{const n=a.results.map((function(t){return{avatar:e(t.QQAvatar,t.mail),content:(a=t.comment,""===a||(a=(a=(a=(a=a.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[圖片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[連結]")).replace(/<pre><code>.*?<\/pre>/gi,"[代碼]")).replace(/<[^>]+>/g,"")).length>150&&(a=a.substring(0,150)+"..."),a),nick:t.nick,url:t.url+"#"+t.objectId,date:t.updatedAt};var a}));saveToLocal.set("valine-newest-comments",JSON.stringify(n),10/1440),t(n)}).catch(e=>{document.querySelector("#card-newest-comments .aside-list").innerHTML="無法獲取評論，請確認相關配置是否正確"})}};a(),document.addEventListener("pjax:complete",a)})</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script></div></body></html>